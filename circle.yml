machine:
  node:
    version: 8.9.0

dependencies:
  pre:
    - echo "//registry.npmjs.org/:_authToken=$NPM_TOKEN" >> ~/.npmrc
    - echo 'machine github.com' > ~/.netrc
    - echo "login $GITHUB_TOKEN" >> ~/.netrc

test:
  override:
    - npm run lint
    - npm run test

deployment:
  production:
    branch: develop
    commands:
      - npm run bundle
      - npm run semantic-release || true
